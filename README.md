# EmbeddedUtil

## Demo codes
### Moving average filter
```
int main()
{
	float test[] = { 0,1,2,3,4,5,6,7,8,9,0,1,2,3,4,5,6,7,8,9,0,1,2,3,4,5,6,7,8,9, 0,1,2,3,4,5,6,7,8,9,0,1,2,3,4,5,6,7,8,9,0,1,2,3,4,5,6,7,8,9, 0,1,2,3,4,5,6,7,8,9,0,1,2,3,4,5,6,7,8,9,0,1,2,3,4,5,6,7,8,9, 0,1,2,3,4,5,6,7,8,9,0,1,2,3,4,5,6,7,8,9,0,1,2,3,4,5,6,7,8,9, 0,1,2,3,4,5,6,7,8,9,0,1,2,3,4,5,6,7,8,9,0,1,2,3,4,5,6,7,8,9, 0,1,2,3,4,5,6,7,8,9,0,1,2,3,4,5,6,7,8,9,0,1,2,3,4,5,6,7,8,9, 0,1,2,3,4,5,6,7,8,9,0,1,2,3,4,5,6,7,8,9,0,1,2,3,4,5,6,7,8,9, 0,1,2,3,4,5,6,7,8,9,0,1,2,3,4,5,6,7,8,9,0,1,2,3,4,5,6,7,8,9, 0,1,2,3,4,5,6,7,8,9,0,1,2,3,4,5,6,7,8,9,0,1,2,3,4,5,6,7,8,9, 0,1,2,3,4,5,6,7,8,9,0,1,2,3,4,5,6,7,8,9,0,1,2,3,4,5,6,7,8,9 };
	float impulseData[] = { 0,0,0,0,0,0,0,0,0,10,0,0,0,0,0,0,0,0,0,-20, 0,0,0,0,0,0,0,0,0,30,0,0,0,0,0,0,0,0,0,10,0,0,0,0,0,0,0,0,0,-20, 0,0,0,0,0,0,0,0,0,30,0,0,0,0,0,0,0,0,0,-10,0,0,0,0,0,0,0,0,0,20, 0,0,0,0,0,0,0,0,0,30,0,0,0,0,0,0,0,0,0,10,0,0,0,0,0,0,0,0,0,20, 0,0,0,0,0,0,0,0,0,30,0,0,0,0,0,0,0,0,0,10,0,0,0,0,0,0,0,0,0,20, 0,0,0,0,0,0,0,0,0,30,0,0,0,0,0,0,0,0,0,10,0,0,0,0,0,0,0,0,0,20, 0,0,0,0,0,0,0,0,0,30,0,0,0,0,0,0,0,0,0,10,0,0,0,0,0,0,0,0,0,20, 0,0,0,0,0,0,0,0,0,-30,0,0,0,0,0,0,0,0,0,10,0,0,0,0,0,0,0,0,0,20, 0,0,0,0,0,0,0,0,0,30,0,0,0,0,0,0,0,0,0,10,0,0,0,0,0,0,0,0,0,20, 0,0,0,0,0,0,0,0,0,30,0,0,0,0,0,0,0,0,0,10,0,0,0,0,0,0,0,0,0,20, 0,0,0,0,0,0,0,0,0,30 };

	MovingAverageFilter m;
	float mafBuffer[3];
	initMAF(&m, mafBuffer, 3);
	for (int i = 0; i < 300; i++)
	{
		pushMAF(&m, test[i]);
		printf("%f, %f, %d \n", test[i], getMAFOutput(&m), isMAFSufficientlyAccumulated(&m));
	}
}
```
### IIR filter
```
int main()
{
	float test[] = { 0,1,2,3,4,5,6,7,8,9,0,1,2,3,4,5,6,7,8,9,0,1,2,3,4,5,6,7,8,9, 0,1,2,3,4,5,6,7,8,9,0,1,2,3,4,5,6,7,8,9,0,1,2,3,4,5,6,7,8,9, 0,1,2,3,4,5,6,7,8,9,0,1,2,3,4,5,6,7,8,9,0,1,2,3,4,5,6,7,8,9, 0,1,2,3,4,5,6,7,8,9,0,1,2,3,4,5,6,7,8,9,0,1,2,3,4,5,6,7,8,9, 0,1,2,3,4,5,6,7,8,9,0,1,2,3,4,5,6,7,8,9,0,1,2,3,4,5,6,7,8,9, 0,1,2,3,4,5,6,7,8,9,0,1,2,3,4,5,6,7,8,9,0,1,2,3,4,5,6,7,8,9, 0,1,2,3,4,5,6,7,8,9,0,1,2,3,4,5,6,7,8,9,0,1,2,3,4,5,6,7,8,9, 0,1,2,3,4,5,6,7,8,9,0,1,2,3,4,5,6,7,8,9,0,1,2,3,4,5,6,7,8,9, 0,1,2,3,4,5,6,7,8,9,0,1,2,3,4,5,6,7,8,9,0,1,2,3,4,5,6,7,8,9, 0,1,2,3,4,5,6,7,8,9,0,1,2,3,4,5,6,7,8,9,0,1,2,3,4,5,6,7,8,9 };
	float impulseData[] = { 0,0,0,0,0,0,0,0,0,10,0,0,0,0,0,0,0,0,0,-20, 0,0,0,0,0,0,0,0,0,30,0,0,0,0,0,0,0,0,0,10,0,0,0,0,0,0,0,0,0,-20, 0,0,0,0,0,0,0,0,0,30,0,0,0,0,0,0,0,0,0,-10,0,0,0,0,0,0,0,0,0,20, 0,0,0,0,0,0,0,0,0,30,0,0,0,0,0,0,0,0,0,10,0,0,0,0,0,0,0,0,0,20, 0,0,0,0,0,0,0,0,0,30,0,0,0,0,0,0,0,0,0,10,0,0,0,0,0,0,0,0,0,20, 0,0,0,0,0,0,0,0,0,30,0,0,0,0,0,0,0,0,0,10,0,0,0,0,0,0,0,0,0,20, 0,0,0,0,0,0,0,0,0,30,0,0,0,0,0,0,0,0,0,10,0,0,0,0,0,0,0,0,0,20, 0,0,0,0,0,0,0,0,0,-30,0,0,0,0,0,0,0,0,0,10,0,0,0,0,0,0,0,0,0,20, 0,0,0,0,0,0,0,0,0,30,0,0,0,0,0,0,0,0,0,10,0,0,0,0,0,0,0,0,0,20, 0,0,0,0,0,0,0,0,0,30,0,0,0,0,0,0,0,0,0,10,0,0,0,0,0,0,0,0,0,20, 0,0,0,0,0,0,0,0,0,30 };

	IIRFilter iir;
	float b[] = { 1.0e-03 * 0.2414, 1.0e-03 * 0.4827, 1.0e-03 * 0.2414 };
	float a[] = { 1.0000, -1.9556, 0.9565 };
	float outputBuffer[3];
	float dataBuffer[3];

	initIIR(&iir, 2, a, b, dataBuffer, outputBuffer);

	for (int i = 0; i < 300; i++)
	{
		pushIIR(&iir, test[i]);
		printf("%f, %f, %d \n", test[i], getIIROutput(&iir), isIIRSufficientlyAccumulated(&iir));
	}
}
```
### Median filter
```
int main()
{
	float test[] = { 0,1,2,3,4,5,6,7,8,9,0,1,2,3,4,5,6,7,8,9,0,1,2,3,4,5,6,7,8,9, 0,1,2,3,4,5,6,7,8,9,0,1,2,3,4,5,6,7,8,9,0,1,2,3,4,5,6,7,8,9, 0,1,2,3,4,5,6,7,8,9,0,1,2,3,4,5,6,7,8,9,0,1,2,3,4,5,6,7,8,9, 0,1,2,3,4,5,6,7,8,9,0,1,2,3,4,5,6,7,8,9,0,1,2,3,4,5,6,7,8,9, 0,1,2,3,4,5,6,7,8,9,0,1,2,3,4,5,6,7,8,9,0,1,2,3,4,5,6,7,8,9, 0,1,2,3,4,5,6,7,8,9,0,1,2,3,4,5,6,7,8,9,0,1,2,3,4,5,6,7,8,9, 0,1,2,3,4,5,6,7,8,9,0,1,2,3,4,5,6,7,8,9,0,1,2,3,4,5,6,7,8,9, 0,1,2,3,4,5,6,7,8,9,0,1,2,3,4,5,6,7,8,9,0,1,2,3,4,5,6,7,8,9, 0,1,2,3,4,5,6,7,8,9,0,1,2,3,4,5,6,7,8,9,0,1,2,3,4,5,6,7,8,9, 0,1,2,3,4,5,6,7,8,9,0,1,2,3,4,5,6,7,8,9,0,1,2,3,4,5,6,7,8,9 };
	float impulseData[] = { 0,0,0,0,0,0,0,0,0,10,0,0,0,0,0,0,0,0,0,-20, 0,0,0,0,0,0,0,0,0,30,0,0,0,0,0,0,0,0,0,10,0,0,0,0,0,0,0,0,0,-20, 0,0,0,0,0,0,0,0,0,30,0,0,0,0,0,0,0,0,0,-10,0,0,0,0,0,0,0,0,0,20, 0,0,0,0,0,0,0,0,0,30,0,0,0,0,0,0,0,0,0,10,0,0,0,0,0,0,0,0,0,20, 0,0,0,0,0,0,0,0,0,30,0,0,0,0,0,0,0,0,0,10,0,0,0,0,0,0,0,0,0,20, 0,0,0,0,0,0,0,0,0,30,0,0,0,0,0,0,0,0,0,10,0,0,0,0,0,0,0,0,0,20, 0,0,0,0,0,0,0,0,0,30,0,0,0,0,0,0,0,0,0,10,0,0,0,0,0,0,0,0,0,20, 0,0,0,0,0,0,0,0,0,-30,0,0,0,0,0,0,0,0,0,10,0,0,0,0,0,0,0,0,0,20, 0,0,0,0,0,0,0,0,0,30,0,0,0,0,0,0,0,0,0,10,0,0,0,0,0,0,0,0,0,20, 0,0,0,0,0,0,0,0,0,30,0,0,0,0,0,0,0,0,0,10,0,0,0,0,0,0,0,0,0,20, 0,0,0,0,0,0,0,0,0,30 };

	MedianFilter median;
	float dataBuffer[5];
	initMedianFilter(&median, dataBuffer, 5);

	for (int i = 0; i < 300; i++)
	{
		printf("%f\n",pushMedianFilter(&median, impulseData[i]));
	}
}
```
